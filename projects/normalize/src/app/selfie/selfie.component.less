@import '../../common.less';

:host {
    width: 100%;
    height: 100%;
    display: flex;
    flex-flow: column;
    align-items: center;
    overflow: hidden;
    justify-content: center;
    position: relative;
    background: @color-dark-brown;

    .prompts {
        position: absolute;
        top: 0;
        z-index: 1;
        left: 0;
        right: 0;
        padding-top: 32px;
        background: linear-gradient(180deg, rgba(0, 0, 0, 0.3) 48.96%, rgba(0, 0, 0, 0) 100%);

        p {
            .font-source-sans;
            font-style: normal;
            font-size: 20px;
            line-height: 25px;
            color: #FFFFFF;
            margin: 0;
            text-align: center;
        }

        p:first-child {
            font-weight: normal;
        }

        p:last-child {
            font-weight: bold;            
        }
    }

    .video {
        width: 100%;
        position: relative;
        max-height: 100%;
        object-fit: contain;
        transform: scaleX(-1);

        video {
            width: 100%;
            height: auto;
            max-height: 100%;
            transition-property: transform transform-origin;
            transition-duration: 250ms;
            transition-timing-function: linear;    
        }
        
        .face-mask-wrapper {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            top: 0;
            left: 0;

            img {
                position: absolute;
                top: 0;
                left: 0;
                margin-left: -97px;
                margin-top: -140px;
            }    
        }

        .face-mask-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            top: 0;
            left: 0;

            img, svg {
                position: absolute;
                transform-origin: 50% 50%;
                // transform: scale(2.25);
            }

            img {
                display: none;
                &.visible {
                    display: block;
                }
            }

            svg {
                text {
                    font: bold 32px sans-serif;
                    text-anchor: middle;
                }
        
            }
        }
        // &.no-detection {
        //     filter: grayscale(1);
        // }
    }

    // .face-mask-container {
    //     width: 100%;
    //     position: absolute;
    //     display: flex;
    //     flex-flow: row;
    //     align-items: stretch;
    //     justify-content: center;

    //     svg {
    //         width: 100%;
    //         height: 100%;
    //     }

    //     path.face-mask, text {
    //         fill: #ff0000;
    //     }

    //     &.detected {
    //         path.face-mask, text {
    //             fill: #00ff00;
    //         }
    //     }
    // }

    .shutter {
        
        position: absolute;
        z-index: 2;
        bottom: 0;
        left: 0;
        right: 0;
        height: 124px;
        user-select: none;
        background-image: url('../../assets/img/camera-button.svg'), linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.5) 48.96%);
        background-repeat: no-repeat;
        background-position: center;
    }

    .flash {
        opacity: 0;
        filter: blur(100px);
        position: absolute;
        z-index: 2;
        width: 100%;
        height: 100%;
        background-color: white;

        &.active {
            animation: 500ms linear 0s 1 normal both flash-animation;
        }
    }
    // .stats {
    //     position: absolute;
    //     top: 50px;
    //     left: 50px;
    //     font-size: 40px;
    //     color: rgba(0,0,0,.25);
    //     text-shadow:
    //         -1px -1px 0 #fff,  
    //         1px -1px 0 #fff,
    //         -1px 1px 0 #fff,
    //         1px 1px 0 #fff;
    //     display: flex;
    //     flex-flow: row;
    //     span {
    //         display: inline-block;
    //         margin: 20px;
    //     }
    // }

    // img {
    //     width: 640px;
    // }

    // .moving-images {
    //     width: 100%;
    //     display: flex;
    //     flex-flow: row wrap;
    //     justify-content: center;
    // }
}

@keyframes flash-animation {
    from {
        opacity: 0;
        filter: blur(50px);
    }

    50% {
        opacity: 1;
        filter: blur(50px);
    }

    to {
        opacity: 1;
        filter: blur(0px);
    }
    
}
